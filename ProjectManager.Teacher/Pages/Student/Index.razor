@page "/Student/Index"
@inherits IndexBase

@if (@isLoading)
{
<TemplatedLoading />}
<div class="box-form">

    <RadzenTemplateForm TItem="StudentRequest" Data="@request" Submit="@OnSearch">
        <div class="search-form">
            <h3 class="box-title">Quản lý sinh viên</h3>
            <div class="row">

                <div class="col-sm-3">
                    <div class="form-group">
                        <RadzenLabel class="form-label" Text="Mã sinh viên" />
                        <RadzenTextBox Placeholder="Mã sinh viên..." @bind-Value="@request.SearchText" />
                    </div>
                </div>

                <div class="col-sm-9">
                    <div class="form-group">
                        <RadzenButton type="submit" Style="margin: 25px 15px;" class="btn btn-success btn-search-form col-lg-2 col-md col-sm">
                            <RadzenIcon Icon="search" class="material-icons-custom" />Tìm kiếm
                        </RadzenButton>

                        
                    </div>


                    @*<div class="row-search-form">
            <RadzenButton type="submit" class="btn btn-success btn-search-form margin-right-10">
                <RadzenIcon Icon="search" class="material-icons-custom" />Tìm kiếm
            </RadzenButton>
            <RadzenButton class="btn btn-success btn-add-form" Click="@(args => ShowModal(new StudentViewModel()))">
                    <RadzenIcon Icon="add_circle_outline" class="material-icons-custom" />Thêm mới
                </RadzenButton>
        </div>*@
                </div>

            </div>
        </div>

    </RadzenTemplateForm>


    <div class="clearfix"></div>

    <RadzenDataGrid class="radzen-data-grid table-form"
                    ColumnWidth="300px"
                    AllowFiltering="false"
                    AllowColumnResize="true"
                    FilterMode="FilterMode.Advanced"
                    AllowPaging="true"
                    AllowSorting="false"
                    TItem="StudentViewModel"
                    LogicalFilterOperator="LogicalFilterOperator.Or"
                    Count="@count"
                    Data="@data"
                    LoadData="@LoadData"
                    PageSize="@pageSize"
                    @ref="grid">
        <Columns>

            <!--<RadzenDataGridColumn Width="90px" TItem="StudentViewModel" Title="Thao tác" Frozen="true" TextAlign="TextAlign.Center">
                <Template Context="data">-->

                    @*<RadzenButton class="btn btn-grid-view" title="Xem dữ liệu" Click="@(args => ShowModal(data))">
                        <RadzenIcon Icon="view" class="material-icons-custom" />
                    </RadzenButton>*@

                    <!--<RadzenButton class="btn btn-grid-edit" title="Sửa dữ liệu" Click="@(args => ShowModal(data))">
                        <RadzenIcon Icon="create" class="material-icons-custom" />
                    </RadzenButton>-->
                    @*<RadzenButton class="btn btn-grid-delete" title="Xóa dữ liệu" Click="@(args => ShowModalDelete(data.Id))">
                        <RadzenIcon Icon="delete_forever" class="material-icons-custom" />
                    </RadzenButton>*@

                <!--</Template>
                <FooterTemplate>
                    Tổng số : <b> @count </b>
                </FooterTemplate>

            </RadzenDataGridColumn>-->


            <RadzenDataGridColumn Width="50px" TItem="StudentViewModel" Property="STT" Title="STT" TextAlign="TextAlign.Center" />
            <RadzenDataGridColumn Width="100px" TItem="StudentViewModel" Property="Username" Title="Mã sinh viên" />
            <RadzenDataGridColumn Width="100px" TItem="StudentViewModel" Property="ID_Student" Title="Mã sinh viên" />
            <RadzenDataGridColumn Width="100px" TItem="StudentViewModel" Property="Name" Title="Tên sinh viên" />
            <RadzenDataGridColumn Width="100px" TItem="StudentViewModel" Property="DateOfBirth" Title="Ngày sinh" />
            <RadzenDataGridColumn Width="100px" TItem="StudentViewModel" Property="Gender" Title="Giới tính" />
            <RadzenDataGridColumn Width="100px" TItem="StudentViewModel" Property="ClasssName" Title="Lớp" />
            <RadzenDataGridColumn Width="100px" TItem="StudentViewModel" Property="Address" Title="Địa chỉ" />
            <RadzenDataGridColumn Width="100px" TItem="StudentViewModel" Property="Email" Title="Email" />


            @*<RadzenDataGridColumn Width="200px" TItem="StudentViewModel" Property="Id" Title="Thông tin">
                    <Template Context="data">
                        <ul class="m-0 padding-left-20">
                            <li>Số điện thoại: @data.PhoneNumber</li>
                            <li>Email: @data.Email</li>
                            <li>Quê quán: @data.Address</li>
                            <li>Ngày sinh: @data.DateOfBirth?.ToString(Constants.DateFormat2)</li>
                        </ul>
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn Width="200px" TItem="StudentViewModel" Property="Id" Title="Thông tin khác">
                    <Template Context="data">
                        <ul class="m-0 padding-left-20">
                            <li>Hệ đào tạo: @data.TrainingSystemName</li>
                            <li>Khoa: @data.DepartmentName</li>
                            <li>Chuyên ngành: @data.SpecializedName</li>
                            <li>Lớp: @data.ClasssName</li>
                        </ul>
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn Width="100px" TItem="StudentViewModel" Property="CreatedBy" Title="Người tạo" />
                <RadzenDataGridColumn Width="100px" TItem="StudentViewModel" Property="CreatedDate" Title="Ngày tạo">
                    <Template Context="data">
                        @(data.CreatedDate.ToString(Constants.DateFormat))
                    </Template>
                </RadzenDataGridColumn>
                <RadzenDataGridColumn Width="100px" TItem="StudentViewModel" Property="ModifiedBy" Title="Người sửa" />

                <RadzenDataGridColumn Width="100px" TItem="StudentViewModel" Property="ModifiedDate" Title="Ngày sửa">
                    <Template Context="data">
                        @(data.ModifiedDate?.ToString(Constants.DateFormat))
                    </Template>
                </RadzenDataGridColumn>*@


        </Columns>
    </RadzenDataGrid>
</div>


@*<div class="col-sm-3 padding-left-0">
        <div class="form-group">
            <RadzenLabel class="form-label" Text="Khoa" />
            <RadzenDropDown class="radzen-dropdown"
                            AllowClear="true"
                            TValue="long?"
                            FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                            FilterOperator="StringFilterOperator.Contains"
                            AllowFiltering="true"
                            Data="@listDepartment"
                            TextProperty="Name"
                            ValueProperty="Id"
                            Placeholder="--Tất cả--"
                            @bind-Value="@request.DepartmentId" />
        </div>
    </div>

    <div class="col-sm-3 padding-left-0">
        <div class="form-group">
            <RadzenLabel class="form-label" Text="Chuyên ngành" />
            <RadzenDropDown class="radzen-dropdown"
                            AllowClear="true"
                            TValue="long?"
                            FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                            FilterOperator="StringFilterOperator.Contains"
                            AllowFiltering="true"
                            Data="@listSpecialized"
                            TextProperty="Name"
                            ValueProperty="Id"
                            Placeholder="--Tất cả--"
                            @bind-Value="@request.SpecializedId" />
        </div>
    </div>
    <div class="col-sm-3 padding-left-0">
        <div class="form-group">
            <RadzenLabel class="form-label" Text="Lớp" />
            <RadzenDropDown class="radzen-dropdown"
                            AllowClear="true"
                            TValue="long?"
                            FilterCaseSensitivity="FilterCaseSensitivity.CaseInsensitive"
                            FilterOperator="StringFilterOperator.Contains"
                            AllowFiltering="true"
                            Data="@listClasss"
                            TextProperty="Name"
                            ValueProperty="Id"
                            Placeholder="--Tất cả--"
                            @bind-Value="@request.ClasssId" />
        </div>
    </div>*@
